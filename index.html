<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abhijith's Website</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        /* CSS variables for easy theme customization */
        :root {
            --background-color: #0a0a0a;
            --terminal-color: #0d1117;
            --text-color: #c9d1d9;
            --glow-color: #2f81f7; /* A nice blue glow */
        }
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Fira Code', monospace;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Hide scrollbars */
        }
        /* The container for the particle animation background */
        #tsparticles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Place it behind everything else */
        }
        /* The main container to center the terminal */
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            padding: 20px;
        }
        /* The terminal window */
        .terminal {
            width: 100%;
            max-width: 800px; /* Increased max-width for better content display */
            height: 80vh;
            background-color: rgba(13, 17, 23, 0.8); /* Semi-transparent */
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-shadow: 0 0 25px rgba(47, 129, 247, 0.2);
            padding: 2rem;
            position: relative;
            transition: transform 0.1s ease-out;
            display: flex;
            flex-direction: column;
        }
        .terminal-header {
            display: flex;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 1.5rem;
            flex-shrink: 0;
        }
        .terminal-button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .red { background-color: #ff5f56; }
        .yellow { background-color: #ffbd2e; }
        .green { background-color: #27c93f; }
        .terminal-content {
            flex-grow: 1;
            overflow-y: auto; /* Allow scrolling for content */
        }
        .terminal-content p {
            margin: 0 0 0.5rem;
            line-height: 1.5;
            font-size: 1.1rem;
            white-space: pre-wrap;
            text-shadow: 0 0 3px rgba(47, 129, 247, 0.3);
        }
        .prompt::before {
            content: '$';
            color: var(--glow-color);
            margin-right: 8px;
        }
        /* Blinking cursor animation */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.2rem;
            background-color: var(--glow-color);
            margin-left: 5px;
            animation: blink 1s steps(1) infinite;
        }
        @keyframes blink {
            50% { opacity: 0; }
        }

        /* --- New Editor and Preview Styles --- */
        .editable-section { display: none; flex-direction: column; height: 100%; }
        .editor-controls { margin-bottom: 1rem; flex-shrink: 0; }
        .editor-controls button {
            background-color: var(--glow-color);
            color: var(--background-color);
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Fira Code', monospace;
            margin-right: 10px;
        }
        .editor-textarea {
            width: 100%;
            flex-grow: 1;
            background-color: rgba(0,0,0,0.5);
            color: var(--text-color);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 1rem;
            padding: 1rem;
            box-sizing: border-box; /* Ensures padding is included in width/height */
        }
        .preview-content {
            flex-grow: 1;
            overflow-y: auto;
            /* GitHub Markdown Styles */
            line-height: 1.6;
        }
        .preview-content h1, .preview-content h2, .preview-content h3 { border-bottom: 1px solid rgba(255, 255, 255, 0.2); padding-bottom: 0.3em; }
        .preview-content a { color: #58a6ff; text-decoration: none; }
        .preview-content a:hover { text-decoration: underline; }
        .preview-content code:not([class*="language-"]) { background-color: rgba(110,118,129,0.4); border-radius: 6px; padding: .2em .4em; font-size: 85%; }
        .preview-content pre { border-radius: 6px; padding: 16px; overflow: auto; }
        .preview-content blockquote { padding: 0 1em; color: #8b949e; border-left: 0.25em solid #30363d; }
        .preview-content ul, .preview-content ol { padding-left: 2em; }
        .preview-content img { max-width: 100%; }
        .hidden { display: none; }
        .nav-link { color: #58a6ff; text-decoration: underline; cursor: pointer; }

    </style>
</head>
<body>
    <div id="tsparticles"></div>
    <div class="container">
        <div class="terminal" id="terminal-window">
            <div class="terminal-header">
                <div class="terminal-button red"></div>
                <div class="terminal-button yellow"></div>
                <div class="terminal-button green"></div>
            </div>
            <div class="terminal-content" id="main-terminal-content">
                <p><span class="prompt"></span><span id="line1"></span></p>
                <p><span class="prompt"></span><span id="line2"></span></p>
                <p><span class="prompt"></span><span id="line3"></span></p>
                <p><span class="prompt"></span><span id="line4"></span></p>
                <p><span class="prompt"></span><span id="line5"></span></p>
                <p><span class="prompt"></span><span id="line6"></span></p>
                <p><span class="prompt"></span><span id="line7"></span><span class="cursor"></span></p>
            </div>

            <div id="concepts-section" class="editable-section terminal-content">
                <div class="editor-controls">
                    <button onclick="saveContent('concepts')">Save</button>
                    <button onclick="showPreview('concepts')">Preview</button>
                    <button onclick="showEditor('concepts')">Edit</button>
                    <button onclick="goHome()">Home</button>
                </div>
                <textarea id="concepts-editor" class="editor-textarea" placeholder="Enter GitHub-flavored Markdown for Concepts..."></textarea>
                <div id="concepts-preview" class="preview-content hidden"></div>
            </div>

            <div id="code-section" class="editable-section terminal-content">
                <div class="editor-controls">
                    <button onclick="saveContent('code')">Save</button>
                    <button onclick="showPreview('code')">Preview</button>
                    <button onclick="showEditor('code')">Edit</button>
                    <button onclick="goHome()">Home</button>
                </div>
                <textarea id="code-editor" class="editor-textarea" placeholder="Enter GitHub-flavored Markdown for Code..."></textarea>
                <div id="code-preview" class="preview-content hidden"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script>
        // --- Audio Engine ---
        const keyClick = new Tone.MembraneSynth({
            pitchDecay: 0.01,
            octaves: 7,
            envelope: { attack: 0.001, decay: 0.15, sustain: 0 },
            volume: -20
        }).toDestination();
        const ambientHum = new Tone.Oscillator("C2", "sine").toDestination().start();
        ambientHum.volume.value = -40;

        // --- Particle Animation Setup ---
        tsParticles.load("tsparticles", {
            background: { color: { value: "#0a0a0a" } },
            fpsLimit: 60,
            interactivity: {
                events: { onHover: { enable: true, mode: "repulse" } },
                modes: { repulse: { distance: 100, duration: 0.4 } },
            },
            particles: {
                color: { value: "#ffffff" },
                links: { color: "#ffffff", distance: 150, enable: true, opacity: 0.1, width: 1 },
                collisions: { enable: true },
                move: {
                    direction: "none",
                    enable: true,
                    outModes: { default: "bounce" },
                    random: false,
                    speed: 1,
                    straight: false,
                },
                number: { density: { enable: true, area: 800 }, value: 80 },
                opacity: { value: 0.1 },
                shape: { type: "circle" },
                size: { value: { min: 1, max: 5 } },
            },
            detectRetina: true,
        });

        // --- Typing Animation & Navigation ---
        const lines = [
            { el: document.getElementById('line1'), text: "Abhijith's website", speed: 100 },
            { el: document.getElementById('line2'), text: "Welcome to my github website.", speed: 50 },
            { el: document.getElementById('line3'), text: "Brace yourselves!", speed: 80 },
            { el: document.getElementById('line4'), text: "RUN: launch --project='Tech-Mastery'", speed: 40 },
            { el: document.getElementById('line5'), text: "<a href='https://snorlax-011.github.io/Tech-Mastery/' target='_blank' style='color: white; text-decoration: underline;'>LAUNCHING PROJECT... [CLICK TO VIEW]</a>", speed: 60 },
            { el: document.getElementById('line6'), text: " ", speed: 100 },
            { el: document.getElementById('line7'), text: "Navigate to: <span class='nav-link' onclick='showSection(\"concepts-section\")'>C_Repo/Concepts</span> or <span class='nav-link' onclick='showSection(\"code-section\")'>C_Repo/Code</span>", speed: 70}
        ];

        async function typeAllLines() {
            if (Tone.context.state !== 'running') await Tone.start();
            for (const line of lines) {
                if (lines.indexOf(line) > 0) {
                    await new Promise(resolve => setTimeout(resolve, 300));
                }
                await typeWriter(line.text, line.el, line.speed);
            }
        }

        function typeWriter(txt, element, speed) {
            return new Promise(resolve => {
                let i = 0;
                function type() {
                    if (i < txt.length) {
                        element.innerHTML += txt.charAt(i);
                        keyClick.triggerAttackRelease("C5", "32n");
                        i++;
                        setTimeout(type, speed);
                    } else {
                        resolve();
                    }
                }
                type();
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            typeAllLines();
            loadContent('concepts');
            loadContent('code');
        });
        
        // --- Interactive Terminal Glitch Effect ---
        const terminalWindow = document.getElementById('terminal-window');
        terminalWindow.addEventListener('mousemove', () => {
            const randomX = (Math.random() - 0.5) * 3;
            const randomY = (Math.random() - 0.5) * 3;
            terminalWindow.style.transform = `translate(${randomX}px, ${randomY}px)`;
        });
        terminalWindow.addEventListener('mouseleave', () => {
            terminalWindow.style.transform = 'translate(0, 0)';
        });
        
        // --- New Editable Content System ---
        const mainTerminal = document.getElementById('main-terminal-content');
        const conceptsSection = document.getElementById('concepts-section');
        const codeSection = document.getElementById('code-section');

        function showSection(sectionId) {
            mainTerminal.style.display = 'none';
            conceptsSection.style.display = 'none';
            codeSection.style.display = 'none';

            const sectionToShow = document.getElementById(sectionId);
            sectionToShow.style.display = 'flex';
            
            // Default to preview mode when showing a section
            if (sectionId === 'concepts-section') showPreview('concepts');
            if (sectionId === 'code-section') showPreview('code');
        }

        function goHome() {
            mainTerminal.style.display = 'block';
            conceptsSection.style.display = 'none';
            codeSection.style.display = 'none';
        }

        function saveContent(type) {
            const editor = document.getElementById(`${type}-editor`);
            localStorage.setItem(`${type}Content`, editor.value);
            alert(`${type.charAt(0).toUpperCase() + type.slice(1)} content saved!`);
            renderMarkdown(type);
        }

        function loadContent(type) {
            const savedContent = localStorage.getItem(`${type}Content`);
            if (savedContent) {
                document.getElementById(`${type}-editor`).value = savedContent;
                renderMarkdown(type);
            }
        }

        function renderMarkdown(type) {
            const editor = document.getElementById(`${type}-editor`);
            const preview = document.getElementById(`${type}-preview`);
            preview.innerHTML = marked.parse(editor.value);
            Prism.highlightAllUnder(preview); // Apply syntax highlighting
        }

        function showPreview(type) {
            renderMarkdown(type);
            document.getElementById(`${type}-editor`).classList.add('hidden');
            document.getElementById(`${type}-preview`).classList.remove('hidden');
        }

        function showEditor(type) {
            document.getElementById(`${type}-editor`).classList.remove('hidden');
            document.getElementById(`${type}-preview`).classList.add('hidden');
        }

    </script>
</body>
</html>
